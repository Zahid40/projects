let legends_wala_arr = {
    "Zahid": {
        "dob": "2005-02-03T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc915JPvENSCmN2A4kbCiuBt0viqIFijMmjlAn1bPeWVCDsyuZMKDFUH9zhGieTxLvgzyB0lGZK9himDvYqmdsEfQQrMk_uZO1wkS11LLmtrakXWbvea1OlWR5KqF1mBCbC0fJ0YXu0O0kLLQW8BBo60=w541-h963-s-no?authuser=0"
    },
    "Jaideep": {
        "dob": "2004-08-26T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc9Uicwp8tOMdqd-nT-znCkNl6RDrTbK3L1Wg1zH4gWmZzce4PTXd5l-z0WX5-5MuenTmxzBykpj_ZxGo9UQs7h0_ump_8ZbOxO4EW1s3i6xqZ1c_Kk8XguwqDhJxhl_cjsZeJpP5aFxSHWtaZkwcOXH=w722-h963-s-no?authuser=0"
    },
    "Sandeep": {
        "dob": "2004-08-26T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc9tnUQeJRRDoIS2fxWnpPlpEhfQnDr4PXOzvmGdjZmbcUpwqztVaBP0JcC4zTjn1kJkwJGOhFokQamBFkj1j9hL92CK-J5ZpaLYdaQxMsOFYgwZPwrd86bYCv6Q2f-Ly2uIe_9lfdoQeONY4HtOcpcPAg=w722-h963-s-no?authuser=0"
    },
    "Vipin": {
        "dob": "2004-09-04T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc8ANrppvu8zbJHYZ4o7e2HAKslOS_1bt5A6JVXdlc63EYoS2qMIJRM-LFeUOItyIL3mHctAm8f-R3DRzxjJCUVmtoNbIklr-WCxSb6UQqohHemwbNlK9dVP6YELlEn8QA-GesuVHGFmI5ZqjfxVKlck=w722-h963-s-no?authuser=0"
    },
    "Arvind": {
        "dob": "2004-09-05T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc89gbqso1uESi3uXwZzrjswQJvdyDLVVc0rtJ7V3xHRK_08TglKrRCIZCjR_UBl50WTKWoonyQZVsNbD1mDldCy7hDJ7_dZCHfas3ehtWOUkSwEq92A3XVsWtxINxwvfWShoj7_6oLQzA-6wHdLawRi=w1710-h963-s-no?authuser=0"
    },
    "Rehan": {
        "dob": "2004-09-03T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc9MBHp6Zg0jV48Y2ZAW6an5gF3ySnMeKRf8HrLLuUE0ZTtpSrF-s9dxJDJu3s-RxFtH6Xo4tbIonrU91Va2NFQuv7XodUpH6ueijXbqRkqMRD5A9veY6nXwINuJoZhuDQnxX3By7mrO9WhqYS4pC0vz=w722-h963-s-no?authuser=0"
    },
    "Amit": {
        "dob": "2004-12-08T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc83ZxqGrjSyaXdiO_WfYoSj837VNTtpa-u1l1c9sZdT64CWMyddrKLMdYGEk8PCjQTngtUbU-estr5QyDKHNoX4S4aErOaRJElYeZ93Tn08l4tXW-isAquZkQtvsc_bSfUbhoDpMJJohyepcbBVg_eK=w1357-h963-s-no?authuser=0"
    },
    "Aman": {
        "dob": "2004-05-07T18:30:00.000Z",
        "image_url": "https://lh3.googleusercontent.com/pw/AIL4fc-7sZLLYSZV8vRX8w_By3WO9OmGi6E4FcpxsXSF4zRzLgYWX4lp2H_GktPStqjAcWDZ93IzNAjwReIH-v04CqH2ZSKISA_bIzT4l_lgUnxbg9NbZujq-eyuFpgISNkLF0COSlBc6ztugribY9b7uGzgKg=w722-h963-s-no?authuser=0"
    }
}

let gallery_arr = ["https://lh3.googleusercontent.com/pw/AIL4fc-P6gwN2GggVbQlLcjjIlTzRW2-lAAQ4Ka7cNtZep3cS6zjZJ6c0A6ggdtJpV74_W1sJvq6E7IiJP0gmaUm2yH2eNsgh94-BJNqPA5Oiu_v1NUQRySdyOYnGEvfP7yHf-tZZtsJhpgApmzY_TMZVeMe=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc9mPoe9YMZTFGcsA_RGt0KvQs3-z8w_tthe_WreRbANQ5O8MqbH7nbe2gHc5P1DSMfxr4dULxifYDL6R458vWljVL7Nl2-Wqc3uy61FDn4UEr1wDgWqUSyujbMnX1JPhVnKdyQ55lYh6X1hC7Uznjn-=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc82XI4njEzSPDCUjOdNoU4ICsS_Nn98cI89OnFSt1lnCA1DM_jE8zK5k5tPisvRRubfwFwl4DyKBArH4YrhjwCM_14Jd_tvMWi_NCiss1GBvru8-Vrm-Z5Z1KXZP--2-JhwFcywduSmo42d25n8BBl3=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc-46K1bGuBLzMz6ObNhmXNInWcG_0hKW7gC5JoiCUdrhKDbTf5b60w9pHeZ1gydBCWWEKNjc_gY7_KI712deYwpsU1Y68XA1i6lXvws1tNgWv8bda6O8XG-TZXX1wNTp3Vjc3SHri9aY0t9sf6q_5pE=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc8yq_TiNcUfXkdfFkF_aofEthFghYpdf2cUUeJP9lrhFJ9lqyAThSB8JNrvMiGdUXVC2OexHXj0a53tB2pH7Low6DTQltzPgtPARirvkAM5YmuDdVrZ0Qz7k7V_aICWhA_k3vJ9lITm8f3R1Jg9HvWV=w1280-h959-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc_dSvs4h52_ibTf9J56b1KF7Z3vzAzCYPbXIw4evWEAGjbuNSO5Y_57ryheZA6anJ3xVf5d8p3YzjUstKhqNTl9oHdwl2wyfBleF_yN0zH8cMKIOu6R2XAxVlHCf3khQ_XU3nPE8REvgBvpYd6B824j=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc8QxqB6GZhy32hE6VevNWlr5ctsVsxgTLOes6oD--i0fZo5Ehhzbaymc-ViN5CgAYwmLw0hYYEfKpmMpciHcIcOvZacZqr8hq5ubXoHBJa59Sp2xDM7f0wFJ8r6qQI_otmXTEhGA-yKmv3S9lpHfPlG=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc-n74IHCEGE_Mp5AQMiAV5IgLEfDcnGGr06LWZpmB7yr83IMkx6bufisSth1HK1WZeOyKtwZAEctpYbxsDpdogTJvEvzotmCHRU4m6VRf_gp3u5ZoxgPfjsCi4mrhWrnysj8fA-ZQUDKhbWF0KbnTzr=w1712-h963-s-no?authuser=0",
    "https://lh3.googleusercontent.com/pw/AIL4fc_l9F1__XQU0ivXmqhS-iy_EPNBN25XqUpz8SnmEUWem9SLd4KHNconYL0rMXID3--2qqFqJNqbDG51tLcG1MiWGbPk8FUoWlsQ59gAdRPXyANcSZoPy5-yAIL2WYD8w8lHb5XAHYpFXAxVz7XqzBh0=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc8SxtkfM5ET0hm3-GWn0g9co6_zwqMz9RLUxp4A_e5W2MvMuDCSbD-iifgndeDNRYPU0dk74AkalwsOMKNqsqIR89lr4VmhCwtZt7hOM0Dbh8LFv095SK5646YdFQ39sAolboQWjZtklmFvrg89mvMY=w1710-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc_PtNfUVPfiScldrwtNTgMQ1OMJ3lFS8Y2lJb23ZC8CIGIhMGqLLWRBUCVcMqjWaoPN__F7GspYFo1QozT3FRE98MbAAGOMqBMXaWMJF5V_du7oXOeRpLvFW4wvl15EcrxVSTQYdUREquQHlOXKmFKO=w1262-h676-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc8TE3G5JBtzhctHpW3TrndUfHAEKDyq9UV0Gz-MO5XSn30simbTmlWUYAfFoBzeao6UqFLG3CDBQz774TwppmJzKCUV7QphEBlOuJZhHGoshc8HQOGsm9cwnKzKUfeW1x1JQO1vP969vyiTmsRzThm4=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc_KDS3QZp12WBbt7IpADYEQDZl-W_Hn0U0fMOjjmSqU0MYKZOO81VRcLvWOOB91ElxyaZl025QQ1geiVjNTBP0VqqUO1Ed19P5Mp1SbO86Ml8MfeBs9Pgl1DOEGDoP2LkxISV2PXwo5KRAvpYDreipv=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc83ZxqGrjSyaXdiO_WfYoSj837VNTtpa-u1l1c9sZdT64CWMyddrKLMdYGEk8PCjQTngtUbU-estr5QyDKHNoX4S4aErOaRJElYeZ93Tn08l4tXW-isAquZkQtvsc_bSfUbhoDpMJJohyepcbBVg_eK=w1357-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc9Up8dgfBOZQQcywam8H4MmZhVMXuXX-VcmeJ09qeRsMuv6TEIt5C7TWDwNDAAO739HBMLxXTM4T4lR3eEGz0skmKqQGEDgRRNjs-motjYh72AxjNgrQa7kD4zp5CzCpyJz4o3Ny_UNdd94YZKgHEr3=w1222-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc-z9ED5akjkhXHtGO3n2t5B4hfan5bInGHwSZ2zmMQALnyRPEd0Q7elCKpUuX8jaP1QzrU7D1ziiNAxZa5yS863CT9zZyUPI2uxvWo6MhcJvsC1MFpFxUe4tSuhankUy--nTKDWi4PTRYkijZPan2UK=w722-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc-TPim76NeklfeGZ7V0cJTW9KTjrF6e8UPLN_SD9_bVfP45WEkSGhOzl351_aBHOn2TAbpyuAjGF32vKndzoFAjwUaSE22r0pr4bAtaWrx5TFbpm10xnEnpabPhWu8oAyAS1WIpDnwl1uAXH4FWZagS=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc8R6FIbLwkoRtN8OsW_SaAi2PkMZOxv7Ym-BfuupurV8cGBpEvRsWHH1oBnHhRfr6TDNVN-vEBRCY8UtaI2-Ojini7D0bmjxK9AAQlclqzPfKf0vmTPiWDzHB-2XrpZzaCdPmxJpWtFsgV21PdAaPQY=w1284-h963-s-no?authuser=0", "https://lh3.googleusercontent.com/pw/AIL4fc_rudO_36foJNn3_TTiLjDn6hF7U4IoFdADtz2i7o2nBPrDrNtSwKWj8nbOoujrlkpc4MI6A3IXS3X-1p8OIdG1FvSr17nh_Qzhj06CjXeO0q-3c8qNr0IdKKnmaKjqQ3qeSat8s9dPy9kLhVRrqRcJ=w1712-h963-s-no?authuser=0",
    "https://lh3.googleusercontent.com/pw/AIL4fc9Iumvhw4a9TwkkDZyqJk51EvRBgr7JJfamo6x6_3xqpokHUp3h3TT8kuwcOUye0HTlXpOobYitNITVaph3YFbP9p1bl1M0LMR0cTtXVPHsh02rbIxVa8QyQ-YuYpKCZTrDobj7ehkFTaqirz6gqLSy=w1712-h963-s-no?authuser=0"]


//main div 


//add photos to legend

let legends = document.getElementById('legends');

function updateLegends() {
    legends.innerHTML = ''; // Clear the previous content

    for (const name in legends_wala_arr) {
        if (legends_wala_arr.hasOwnProperty(name)) {
            const { dob, image_url } = legends_wala_arr[name];
            const dobDate = new Date(dob);
            let month_arr = ['January' , 'Febuary' , 'March' , 'April' , 'May' , 'June' , 'July' , 'August' , 'September', 'October' , 'November' , 'December']
            const formattedDate = `${dobDate.getDate()} ${month_arr[dobDate.getMonth()]} ${dobDate.getFullYear()}`;

            // const currentDate = new Date();
            // console.log(dob);
            const ageDetails = calculateAgeDetails(dob);

            legends.innerHTML += `<div class="legend flex flex-col items-center col-span-1 p-4 font-light">
                <img src="${image_url}" alt="Logo" class="w-16 h-24 mr-2 rounded-full">
                <span class="text-1xl text-purple-900">${name}</span>
                <p class="text-1xl text-purple-700 text-center hidden font-bold">DOB : ${formattedDate}</p>
                <p class="text-1xl text-purple-700 text-center hidden font-bold outline outline-purple-600 m-2 p-3 rounded-2xl">Upcoming Birthday in ${12 - (ageDetails.months == 0 ? ageDetails.months + 1 : ageDetails.months)} months ${30 - (ageDetails.days == 0 ? ageDetails.days + 1 : ageDetails.days)} days ${24-(ageDetails.hours == 0 ? ageDetails.hours + 1 : ageDetails.hours )} hours ${60 - (ageDetails.minutes == 0 ? ageDetails.minutes + 1 : ageDetails.minutes)} minutes</p>
                <p class="text-1xl text-purple-500 text-center hidden font-bold outline outline-purple-600 m-2 p-3 rounded-2xl">${ageDetails.years} years, ${ageDetails.months} months, ${ageDetails.days} days, ${ageDetails.hours} hours, ${ageDetails.minutes} minutes on Earth</p>
            </div>`;
        }
    }

    const legendsContainer = document.getElementById('legends');
    const legendsDivs = legendsContainer.querySelectorAll('.legend');

    let currentlyExpandedLegend = null;

    legendsDivs.forEach(legend => {
        legend.addEventListener('click', function () {
            if (currentlyExpandedLegend !== null && currentlyExpandedLegend !== this) {
                resetLegendStyles(currentlyExpandedLegend);
            }

            const legendP = legend.querySelectorAll('p');

            if (currentlyExpandedLegend === this) {
                resetLegendStyles(this);
                currentlyExpandedLegend = null;
            } else {
                this.classList.add("col-span-4");

                const legendImage = this.querySelector('img');
                legendImage.classList.add("w-40", "h-56");

                const legendspan = this.querySelector('span');
                legendspan.classList.add("text-purple-300", "text-3xl", "font-bold");

                legendP.forEach(p => {
                    p.style.display = "block";
                });

                currentlyExpandedLegend = this;
            }
        });
    });

    function resetLegendStyles(legend) {
        legend.classList.remove("col-span-4");

        const legendImage = legend.querySelector('img');
        legendImage.classList.remove("w-40", "h-56");

        const legendspan = legend.querySelector('span');
        legendspan.classList.remove("text-purple-300", "text-3xl", "font-bold");

        const legendP = legend.querySelectorAll('p');
        legendP.forEach(p => {
            p.style.display = "none";
        });
    }
}

// Initial update
updateLegends();

// Update every minute
setInterval(updateLegends, 60000); // 60000 milliseconds = 1 minute


function calculateAgeDetails(dob_user) {

    var dob = new Date(dob_user);

    var dobYear = dob.getYear();
    var dobMonth = dob.getMonth();
    var dobDate = dob.getDate();

    //get the current date from the system  
    var now = new Date();
    //extract the year, month, and date from current date  
    var currentYear = now.getYear();
    var currentMonth = now.getMonth();
    var currentDate = now.getDate();
    var currentHours = now.getHours();
    var currentMinutes = now.getMinutes();

    //get years  
    yearAge = currentYear - dobYear;
    //get months  
    if (currentMonth >= dobMonth)
        //get months when current month is greater  
        var monthAge = currentMonth - dobMonth;
    else {
        yearAge--;
        var monthAge = 12 + currentMonth - dobMonth;
    }

    //get days  
    if (currentDate >= dobDate)
        //get days when the current date is greater  
        var dateAge = currentDate - dobDate;
    else {
        monthAge--;
        var dateAge = 31 + currentDate - dobDate;

        if (monthAge < 0) {
            monthAge = 11;
            yearAge--;
        }
    }


    //get hours
    var hourAge;
    if (currentHours >= dob.getHours())
        hourAge = currentHours - dob.getHours();
    else {
        dateAge--;
        hourAge = 24 + currentHours - dob.getHours();

        if (dateAge < 0) {
            dateAge = 30;  // Assuming 30 days in a month
            monthAge--;
        }
    }

    //get minutes
    var minuteAge;
    if (currentMinutes >= dob.getMinutes())
        minuteAge = currentMinutes - dob.getMinutes();
    else {
        hourAge--;
        minuteAge = 60 + currentMinutes - dob.getMinutes();

        if (hourAge < 0) {
            hourAge = 23;
            dateAge--;
            if (dateAge < 0) {
                dateAge = 30;
                monthAge--;
            }
        }
    }

    return {
        years: yearAge,
        months: monthAge,
        days: dateAge,
        hours: hourAge,
        minutes: minuteAge
    };
}


// Initial update
updateLegends();

// Update every minute
setInterval(updateLegends, 60000); // 60000 milliseconds = 1 minute










//gallery
let gallery = document.getElementById('gallery');
let gallery_listen = document.getElementById('gallery_listen');
let toggleButton = document.getElementById('button'); // Add this line

gallery_listen.addEventListener('click', function () {
    gallery_listen.style.display = 'none';

    for (let index = 0; index < gallery_arr.length; index++) {
        const imageDiv = document.createElement('div');
        imageDiv.classList.add('rounded-2xl', 'bg-center', 'bg-no-repeat', 'bg-cover', 'outline', 'outline-purple-200', 'h-80');

        const randomColSpan = Math.floor(Math.random() * 3) + 1; // Random col-span value between 1 and 3

        imageDiv.style.backgroundImage = `url('${gallery_arr[gallery_arr.length - index - 1]}')`;
        imageDiv.classList.add(`col-span-${randomColSpan}`);

        gallery.appendChild(imageDiv);
    }
});

toggleButton.addEventListener('click', function () {
    // Toggle visibility of gallery images
    const images = gallery.querySelectorAll('.rounded-2xl');
    images.forEach(image => {
        if (image.style.display === 'none' || image.style.display === '') {
            image.style.display = 'block';
        } else {
            image.style.display = 'none';
        }
    });
});
